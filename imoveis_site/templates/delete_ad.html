{% extends 'base.html' %}

{% block title %}Excluir AnÃºncio - Site de ImÃ³veis{% endblock %}

{% block content %}
<div class="form-container" style="max-width: 500px;">
    <!-- Ãcone de Aviso -->
    <div style="text-align: center; margin-bottom: 2rem;">
        <div style="font-size: 4rem; color: #dc3545; margin-bottom: 1rem;">
            âš ï¸
        </div>
        <h2 style="color: #dc3545; font-size: 1.8rem; margin-bottom: 0.5rem;">
            Excluir AnÃºncio
        </h2>
        <p style="color: var(--cor-texto);">
            Esta aÃ§Ã£o nÃ£o pode ser desfeita
        </p>
    </div>

    <!-- InformaÃ§Ãµes do AnÃºncio -->
    <div style="background: var(--cor-erro); border: 1px solid #f5c6cb; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
        <h3 style="color: #721c24; margin-bottom: 1rem; font-size: 1.2rem;">
            ğŸ“‹ AnÃºncio que serÃ¡ excluÃ­do:
        </h3>
        
        <div style="background: var(--branco); padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
            <h4 style="color: var(--cor-destaque); margin-bottom: 0.5rem;">
                ğŸ  {{ ad.title }}
            </h4>
            <p style="margin: 0.25rem 0; color: var(--cor-texto); font-size: 0.9rem;">
                <strong>ğŸ“ Local:</strong> {{ ad.location }}
            </p>
            <p style="margin: 0.25rem 0; color: var(--cor-texto); font-size: 0.9rem;">
                <strong>ğŸ“‚ Tipo:</strong> {{ ad.category }}
            </p>
            <p style="margin: 0.25rem 0; color: var(--cor-link); font-size: 1rem;">
                <strong>ğŸ’° PreÃ§o:</strong> R$ {{ ad.price }}/mÃªs
            </p>
            {% if ad.description %}
                <p style="margin: 0.5rem 0 0 0; color: var(--cor-texto); font-size: 0.9rem;">
                    <strong>ğŸ“„ DescriÃ§Ã£o:</strong> {{ ad.description|truncatewords:20 }}
                </p>
            {% endif %}
        </div>
        
        <div style="color: #721c24; font-size: 0.9rem;">
            <strong>â° Criado em:</strong> {{ ad.created_at|date:"d/m/Y Ã s H:i" }}<br>
            {% if ad.updated_at != ad.created_at %}
                <strong>âœï¸ Ãšltima ediÃ§Ã£o:</strong> {{ ad.updated_at|date:"d/m/Y Ã s H:i" }}
            {% endif %}
        </div>
    </div>

    <!-- Pergunta de ConfirmaÃ§Ã£o -->
    <div style="text-align: center; margin-bottom: 2rem;">
        <h3 style="color: var(--cor-destaque); font-size: 1.3rem; margin-bottom: 1rem;">
            Tem certeza que deseja excluir este anÃºncio?
        </h3>
        <p style="color: var(--cor-texto); font-size: 1rem;">
            Uma vez excluÃ­do, vocÃª perderÃ¡:
        </p>
        <ul style="text-align: left; color: var(--cor-texto); margin: 1rem 0; padding-left: 2rem;">
            <li>Todas as informaÃ§Ãµes do anÃºncio</li>
            <li>PossÃ­veis contatos de interessados</li>
            <li>O histÃ³rico de visualizaÃ§Ãµes</li>
            <li>As fotos enviadas</li>
        </ul>
    </div>

    <!-- FormulÃ¡rio de ConfirmaÃ§Ã£o -->
    <form method="post" style="text-align: center;">
        {% csrf_token %}
        
        <!-- Checkbox de ConfirmaÃ§Ã£o -->
        <div style="margin-bottom: 2rem;">
            <label style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="confirm-delete" required style="transform: scale(1.2);">
                <span style="color: var(--cor-texto);">
                    Entendo que esta aÃ§Ã£o Ã© irreversÃ­vel
                </span>
            </label>
        </div>
        
        <!-- BotÃµes de AÃ§Ã£o -->
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <button type="submit" 
                    class="btn btn-danger" 
                    style="min-width: 150px;"
                    id="delete-btn"
                    disabled>
                ğŸ—‘ï¸ Sim, Excluir Definitivamente
            </button>
            <a href="{% url 'index' %}" 
               class="btn btn-secondary" 
               style="min-width: 150px;">
                â†©ï¸ Cancelar e Voltar
            </a>
        </div>
    </form>

    <!-- Alternativas -->
    <div style="background: var(--cor-info); padding: 1rem; border-radius: 6px; margin-top: 2rem; text-align: center;">
        <h4 style="color: #0c5460; margin-bottom: 0.5rem; font-size: 1rem;">
            ğŸ’¡ Alternativas Ã  exclusÃ£o:
        </h4>
        <p style="margin: 0; color: #0c5460; font-size: 0.9rem;">
            Em vez de excluir, vocÃª pode 
            <a href="{% url 'edit_ad' ad.id %}" style="color: #007bff; text-decoration: underline;">
                editar o anÃºncio
            </a> para atualizÃ¡-lo
        </p>
    </div>
</div>

<!-- Script para controlar o botÃ£o -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const checkbox = document.getElementById('confirm-delete');
    const deleteBtn = document.getElementById('delete-btn');
    
    checkbox.addEventListener('change', function() {
        deleteBtn.disabled = !this.checked;
        
        if (this.checked) {
            deleteBtn.style.opacity = '1';
            deleteBtn.style.cursor = 'pointer';
        }